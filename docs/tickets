ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-001
TITEL: Aufgaben vom Tag fehlen in Aufgabenübersicht
TYP: Bug
PRIORITÄT: P0
STATUS: ✅ GEFIXT (27.01.2026)

PROBLEM:
- Ist: Aufgaben, die heute erstellt werden, tauchen nicht in der Aufgabenübersicht auf.
- Soll: Neue Aufgaben müssen sofort in der Aufgabenübersicht erscheinen.
- Kontext: Aufgabenverwaltung / Aufgabenübersicht.

ROOT CAUSE: aufgaben-content.jsx:77 verwendet toISOString().split('T')[0] → UTC-Konvertierung verschiebt Datum.

LÖSUNG: Lokale formatLocalDate() Helper verwendet statt toISOString().

SCOPE-FENCE:
- Erlaubt: aufgaben-content.jsx Zeile 77 ändern
- Erlaubt: Lokale formatDate() Helper oder Import aus use-dashboard.js
- Verboten: Globale Date-Utils refactoren
- Verboten: Andere Komponenten ändern

CHANGE-BUDGET: 1 Datei, max 10 Zeilen.

VORGEHEN:
1) Ursache nennen.
2) Minimal Patch vorschlagen.
3) Patch implementieren als kleinen Diff.
4) Manuelle Tests (mind 4 Schritte).
5) Optional 1 kleiner Test.

AKZEPTANZ:
- Neue Aufgabe erscheint direkt ohne Reload.
- Filter Datum Heute zeigt sie zuverlässig.
- Keine Änderung am Verhalten für andere Tage.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-002
TITEL: Lernblock Aufgaben werden nicht in To Do/Verwaltung gelistet
TYP: Bug
PRIORITÄT: P0
STATUS: ✅ GEFIXT (27.01.2026)

PROBLEM:
- Ist: Aufgabe im Lernblock erstellt erscheint weder links in To Do noch unter Verwaltung Aufgabenübersicht.
- Soll: Lernblock Aufgaben werden wie normale Aufgaben synchron in allen Listen angezeigt.
- Kontext: Lernblock Editor -> Task Aggregation.

ROOT CAUSE: Block-Tasks in block.tasks[] (calendar_blocks), Dashboard liest nur tasksByDate (calendar_tasks). Zwei isolierte Systeme.

LÖSUNG: Read-side aggregation in aufgaben-content.jsx und use-dashboard.js - Block-Tasks werden aus blocksByDate extrahiert und mit tasksByDate zusammengeführt.

SCOPE-FENCE:
- Erlaubt: Dashboard/Verwaltung Tasks aus blocksByDate aggregieren (read-side fix)
- Erlaubt: use-dashboard.js und aufgaben-content.jsx erweitern
- Verboten: Block-Task-Erstellung ändern
- Verboten: Neues Sync-System einführen
- Verboten: calendar_tasks Tabelle für Block-Tasks nutzen

CHANGE-BUDGET: 2 Dateien, max 50 Zeilen.

VORGEHEN: Ursache, minimaler Patch, Diff, Tests, optional Test.

AKZEPTANZ:
- Lernblock Aufgabe erscheint sofort in To Do.
- Lernblock Aufgabe erscheint unter Verwaltung.
- Keine Duplikate, keine falschen Fälligkeiten.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-003
TITEL: Navigation/Verknüpfung Monat Woche Tagesansicht inkonsistent
TYP: Bug
PRIORITÄT: P1

PROBLEM:
- Ist: Verknüpfung zwischen Monat, Wochen, Tagesansicht ist fehlerhaft oder springt falsch.
- Soll: Wechsel zwischen Ansichten behält das ausgewählte Datum konsistent bei.
- Kontext: Kalender.

SCOPE-FENCE:
- Erlaubt: Kalender Navigation Code. Max 3 Dateien.
- Verboten: Kein UI Redesign, kein Refactor, keine neuen Dependencies.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

VORGEHEN:
1) Repro Schritte nennen.
2) Ursache und minimal Fix.
3) Diff.
4) Manuelle Tests.

AKZEPTANZ:
- Datum bleibt beim Wechsel konsistent.
- Zurück Navigation führt zum erwarteten Datum.








ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-004
TITEL: Sekundenanzeige im Tagesplaner entfernen
TYP: UX
PRIORITÄT: P2

PROBLEM:
- Ist: Uhrzeit im Tagesplaner zeigt Sekunden.
- Soll: Tagesplaner zeigt nur HH:MM.
- Kontext: Tagesplaner Zeitdarstellung.

SCOPE-FENCE:
- Erlaubt: Nur TimeFormat Utility oder betroffene Komponente. Max 2 Dateien.
- Verboten: Keine Änderungen an anderen Views.

CHANGE-BUDGET: Max 2 Dateien, max 60 Zeilen.

AKZEPTANZ:
- Tagesplaner zeigt keine Sekunden mehr.
- Andere Komponenten bleiben unverändert.




ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-005
TITEL: Timer läuft bei Background/Screen Sync nicht zuverlässig weiter
TYP: Bug
PRIORITÄT: P0
STATUS: ✅ GEFIXT (T16-W3)

PROBLEM:
- Ist: Timer stoppt oder driftet, wenn Tab inaktiv ist oder Screen Sync.
- Soll: Timer basiert auf Timestamps (Startzeit + elapsed) und bleibt korrekt.
- Kontext: Timer/Stoppuhr.

LÖSUNG (implementiert):
- Timer verwendet timestamp-basierte Berechnung (nicht Interval-Counting)
- Visibility Change Handler implementiert (recalculates bei Tab-Wechsel)
- localStorage + Supabase Persistenz für Restart-Szenarios
- Betroffene Datei: src/contexts/timer-context.jsx (Zeilen 392-396, 413-422, 652-673)

KEINE AKTION ERFORDERLICH.





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-006
TITEL: Neuer Termin übernimmt Uhrzeit des angeklickten Zeitfensters
TYP: UX
PRIORITÄT: P1
STATUS: DUPLIKAT von PW-014

PROBLEM:
- Ist: Neuer Termin setzt Uhrzeit nicht passend zum angeklickten Slot.
- Soll: Klick auf Slot setzt Startzeit = Slot Start, Endzeit default = +X Minuten.
- Kontext: Kalender Slot Klick Create Event.

EMPFEHLUNG: PW-006 schließen, PW-014 behalten. Identische Root Cause.





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-007
TITEL: Lernblock am konkreten Tag kann kein Rechtsgebiet setzen
TYP: Bug/UX
PRIORITÄT: P1

PROBLEM:
- Ist: Beim Erstellen eines Lernblocks am konkreten Tag fehlt Auswahl Rechtsgebiet, daher gleiche Farben.
- Soll: Rechtsgebiet ist wählbar und Farbe basiert darauf.
- Kontext: Lernblock Create Modal / Day View.

SCOPE-FENCE:
- Erlaubt: Nur Lernblock Create UI + Model Binding. Max 3 Dateien.
- Verboten: Kein Umbau des Farbsystems.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Rechtsgebiet kann gesetzt werden.
- Farbcode unterscheidet korrekt.
- Bestehende Lernblöcke bleiben korrekt.





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-008
TITEL: Globale Play/Pause Controls für Stoppuhr
TYP: UX
PRIORITÄT: P2

PROBLEM:
- Ist: Play/Pause nur in Timer Ansicht erreichbar.
- Soll: Oben im Header globale Controls (nur für Stoppuhr) sichtbar wenn aktiv.
- Kontext: Header/Navigation.

SCOPE-FENCE:
- Erlaubt: Header Komponente + Timer State Hook. Max 3 Dateien.
- Verboten: Kein Navigation Refactor.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Play/Pause im Header steuert Stoppuhr korrekt.
- Keine Layout Regression in anderen Screens.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-009
TITEL: Sekundenanzeige bei Stoppuhr anzeigen
TYP: UX
PRIORITÄT: P2

PROBLEM:
- Ist: Stoppuhr zeigt keine Sekunden, Bewegung ist schwer erkennbar.
- Soll: Anzeige inkl Sekunden (MM:SS oder HH:MM:SS) nur in Stoppuhr.
- Kontext: Stoppuhr Display.

SCOPE-FENCE:
- Erlaubt: Nur Stoppuhr Anzeige oder TimeFormat lokal. Max 2 Dateien.
- Verboten: Keine globale Time Format Änderung.

CHANGE-BUDGET: Max 2 Dateien, max 60 Zeilen.

AKZEPTANZ:
- Stoppuhr zeigt Sekunden.
- Kalender und Tagesplaner Formate bleiben unverändert.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-010
TITEL: Wochenansicht Termine ohne Sekunden
TYP: UX
PRIORITÄT: P2

PROBLEM:
- Ist: Termine in Wochenansicht zeigen Sekunden.
- Soll: Nur HH:MM.
- Kontext: Wochenansicht Event Render.

SCOPE-FENCE:
- Erlaubt: Nur Wochenansicht Render und lokales Format. Max 2 Dateien.
- Verboten: Keine globale Format Änderung.

CHANGE-BUDGET: Max 2 Dateien, max 60 Zeilen.

AKZEPTANZ:
- Wochenansicht ohne Sekunden.
- Andere Views unverändert.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-011
TITEL: Morgen Check in erledigt Feld nimmt zu viel Platz ein
TYP: UX
PRIORITÄT: P2

PROBLEM:
- Ist: Feld ist zu groß und verdrängt Inhalte.
- Soll: Kompakter, weniger Höhe, ggf einklappbar.
- Kontext: Startseite.

SCOPE-FENCE:
- Erlaubt: Nur Startseiten Komponente und CSS. Max 2 Dateien.
- Verboten: Kein Redesign Startseite.

CHANGE-BUDGET: Max 2 Dateien, max 80 Zeilen.

AKZEPTANZ:
- Feld ist sichtbar aber kompakter.
- Keine Überlappung oder Layout Brüche.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-012
TITEL: Großer Start Button startet Timer nicht
TYP: Bug
PRIORITÄT: P0
STATUS: ✅ GEFIXT

PROBLEM:
- Ist: Start Button oben startet Timer nicht, nur über Einstellungen Klick.
- Soll: Start Button löst exakt dieselbe Start Aktion aus wie der funktionierende Weg.
- Kontext: Timer Start CTA.

LÖSUNG (implementiert):
- Start Button in ConfiguredIdleState (timer-main-dialog.jsx:910-940)
- Ruft startFromConfig() korrekt auf
- startFromConfig() liest frische Config aus localStorage (BUG-015 Fix)
- Setzt timerState = TIMER_STATES.RUNNING korrekt

KEINE AKTION ERFORDERLICH.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-013
TITEL: Tagesziel reset und Anzeige "Tagesziel erreicht" korrekt
TYP: Bug
PRIORITÄT: P0
STATUS: ✅ GEFIXT (27.01.2026)

PROBLEM:
- Ist: Tagesziel resettiert nicht, zeigt Zeit von gestern. Anzeige "Tagesziel erreicht -> 7:54" wirkt wie aktuelle Uhrzeit.
- Soll: Reset täglich korrekt. Anzeige zeigt Zeitpunkt des Zielerreichens oder klar benannt.
- Kontext: Tagesziel Tracking.

ROOT CAUSE: dashboard-sub-header.jsx:136 zeigt currentTime (updates jede Sekunde)

LÖSUNG: Verwirrende Zeit entfernt - zeigt jetzt nur "Tagesziel erreicht" ohne aktuelle Uhrzeit.
- dashboard-sub-header.jsx: secondaryText statt currentTime verwendet
- timer-context.jsx: COUNTUP secondaryText ohne Zeit

SCOPE-FENCE:
- Erlaubt: dashboard-sub-header.jsx Zeile 136 ändern
- Erlaubt: timer-context.jsx secondaryText Berechnung anpassen
- Verboten: Reset-Logik ändern (funktioniert bereits)
- Verboten: Neue State-Variablen für "Zielerreichungszeit"

CHANGE-BUDGET: 2 Dateien, max 20 Zeilen.

AKZEPTANZ:
- Anzeige nicht mehr verwirrend
- Reset erfolgt bei Tageswechsel korrekt
- Keine Datenverluste





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-014
TITEL: Slot Klick setzt Uhrzeit fälschlich auf 09:00, Drag korrekt
TYP: Bug
PRIORITÄT: P0
STATUS: ✅ GEFIXT (27.01.2026)

PROBLEM:
- Ist: Klick auf Zeitfenster erzeugt Termin mit 09:00. Drag erzeugt korrekte Zeit.
- Soll: Klick übernimmt Slot Startzeit, analog zu Drag Default.
- Kontext: Semesterbetrieb Übungsklausur/Klausur auf Startseite.

ROOT CAUSE:
- Click-Handler: Math.floor(y / hourHeight) → rundet auf ganze Stunde
- Drag-Handler: yToTime(y) → 15-Minuten-Snapping

LÖSUNG: Click-Handler verwendet jetzt yToTime() + formatTimeFromHour() wie Drag-Handler.

SCOPE-FENCE:
- Erlaubt: week-grid.jsx Click-Handler (Zeile 924-932) anpassen
- Erlaubt: yToTime() Funktion wiederverwenden
- Verboten: Drag-Handler ändern
- Verboten: Dialog-Komponenten ändern

CHANGE-BUDGET: 1 Datei, max 15 Zeilen.

AKZEPTANZ:
- Klick erzeugt Termin mit korrekter Startzeit (15-Min-Präzision).
- Drag bleibt unverändert.
- Keine Änderung anderer Default Zeiten.







ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-015
TITEL: Themenplan Erstellung über Screenshot
TYP: Feature
PRIORITÄT: P2

PROBLEM:
- Ist: Kein Weg, aus Screenshot einen Themenplan zu erzeugen.
- Soll: MVP: Upload Screenshot -> extrahiere Text -> erstelle Themenliste -> Nutzer kann bearbeiten -> speichern.
- Kontext: Themenplan.

SCOPE-FENCE:
- Erlaubt: Nur neuer kleiner Flow als MVP in bestehenden Feature Struktur. Max 5 Dateien.
- Verboten: Kein komplettes Redesign Themenplan, keine neue Architektur.

CHANGE-BUDGET: Max 5 Dateien, max 250 Zeilen.

VORGEHEN:
1) Vorschlag für kleinsten MVP.
2) Implementiere nur MVP.
3) Manuelle Tests.

AKZEPTANZ:
- Screenshot Upload möglich.
- Ergebnis als editierbare Liste.
- Speichern funktioniert.




================================================================================
                        P0 ZUSAMMENFASSUNG (27.01.2026)
================================================================================

ALLE P0 BUGS GEFIXT! ✅

| Ticket | Status | Commit |
|--------|--------|--------|
| PW-001 | ✅ GEFIXT | UTC date fix in aufgaben-content.jsx |
| PW-002 | ✅ GEFIXT | Block-Tasks Aggregation |
| PW-005 | ✅ GEFIXT | T16-W3 (bereits vorher) |
| PW-006 | DUPLIKAT | → PW-014 |
| PW-012 | ✅ GEFIXT | (bereits vorher) |
| PW-013 | ✅ GEFIXT | Display fix ohne verwirrende Zeit |
| PW-014 | ✅ GEFIXT | yToTime() für 15-Min-Präzision |
