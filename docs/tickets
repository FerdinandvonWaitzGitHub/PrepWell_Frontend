ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-001
TITEL: Aufgaben vom Tag fehlen in AufgabenÃ¼bersicht
TYP: Bug
PRIORITÃ„T: P0

PROBLEM:
- Ist: Aufgaben, die heute erstellt werden, tauchen nicht in der AufgabenÃ¼bersicht auf.
- Soll: Neue Aufgaben mÃ¼ssen sofort in der AufgabenÃ¼bersicht erscheinen.
- Kontext: Aufgabenverwaltung / AufgabenÃ¼bersicht.

SCOPE-FENCE:
- Erlaubt: Finde 1 bis 3 wahrscheinlichste Dateien (TaskStore/TaskService/TaskList) und Ã¤ndere max 3 Dateien.
- Verboten: Kein Refactor, keine Umbenennungen, keine neuen Dependencies, keine FormatierungsÃ¤nderungen, keine UI Ã„nderungen auÃŸerhalb Task Ãœbersicht.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

VORGEHEN:
1) Ursache nennen.
2) Minimal Patch vorschlagen.
3) Patch implementieren als kleinen Diff.
4) Manuelle Tests (mind 4 Schritte).
5) Optional 1 kleiner Test.

AKZEPTANZ:
- Neue Aufgabe erscheint direkt ohne Reload.
- Filter Datum Heute zeigt sie zuverlÃ¤ssig.
- Keine Ã„nderung am Verhalten fÃ¼r andere Tage.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-002
TITEL: Lernblock Aufgaben werden nicht in To Do/Verwaltung gelistet
TYP: Bug
PRIORITÃ„T: P0

PROBLEM:
- Ist: Aufgabe im Lernblock erstellt erscheint weder links in To Do noch unter Verwaltung AufgabenÃ¼bersicht.
- Soll: Lernblock Aufgaben werden wie normale Aufgaben synchron in allen Listen angezeigt.
- Kontext: Lernblock Editor -> Task Aggregation.

SCOPE-FENCE:
- Erlaubt: Finde die Erzeugung von Lernblock Aufgaben und die Liste Aggregation. Ã„ndere max 3 Dateien.
- Verboten: Kein Refactor, keine neuen Datenmodelle, keine UI Umgestaltung.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

VORGEHEN: Ursache, minimaler Patch, Diff, Tests, optional Test.

AKZEPTANZ:
- Lernblock Aufgabe erscheint sofort in To Do.
- Lernblock Aufgabe erscheint unter Verwaltung.
- Keine Duplikate, keine falschen FÃ¤lligkeiten.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-003
TITEL: Navigation/VerknÃ¼pfung Monat Woche Tagesansicht inkonsistent
TYP: Bug
PRIORITÃ„T: P1

PROBLEM:
- Ist: VerknÃ¼pfung zwischen Monat, Wochen, Tagesansicht ist fehlerhaft oder springt falsch.
- Soll: Wechsel zwischen Ansichten behÃ¤lt das ausgewÃ¤hlte Datum konsistent bei.
- Kontext: Kalender.

SCOPE-FENCE:
- Erlaubt: Kalender Navigation Code. Max 3 Dateien.
- Verboten: Kein UI Redesign, kein Refactor, keine neuen Dependencies.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

VORGEHEN:
1) Repro Schritte nennen.
2) Ursache und minimal Fix.
3) Diff.
4) Manuelle Tests.

AKZEPTANZ:
- Datum bleibt beim Wechsel konsistent.
- ZurÃ¼ck Navigation fÃ¼hrt zum erwarteten Datum.








ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-004
TITEL: Sekundenanzeige im Tagesplaner entfernen
TYP: UX
PRIORITÃ„T: P2

PROBLEM:
- Ist: Uhrzeit im Tagesplaner zeigt Sekunden.
- Soll: Tagesplaner zeigt nur HH:MM.
- Kontext: Tagesplaner Zeitdarstellung.

SCOPE-FENCE:
- Erlaubt: Nur TimeFormat Utility oder betroffene Komponente. Max 2 Dateien.
- Verboten: Keine Ã„nderungen an anderen Views.

CHANGE-BUDGET: Max 2 Dateien, max 60 Zeilen.

AKZEPTANZ:
- Tagesplaner zeigt keine Sekunden mehr.
- Andere Komponenten bleiben unverÃ¤ndert.




ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-005
TITEL: Timer lÃ¤uft bei Background/Screen Sync nicht zuverlÃ¤ssig weiter
TYP: Bug
PRIORITÃ„T: P0

PROBLEM:
- Ist: Timer stoppt oder driftet, wenn Tab inaktiv ist oder Screen Sync.
- Soll: Timer basiert auf Timestamps (Startzeit + elapsed) und bleibt korrekt.
- Kontext: Timer/Stoppuhr.

SCOPE-FENCE:
- Erlaubt: Timer Logik Dateien. Max 3 Dateien.
- Verboten: Keine komplette Timer Neustrukturierung. Keine neue Library.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Timer zeigt nach Tab Wechsel korrekte Laufzeit.
- Start/Pause/Resume konsistent.





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-006
TITEL: Neuer Termin Ã¼bernimmt Uhrzeit des angeklickten Zeitfensters
TYP: UX
PRIORITÃ„T: P1

PROBLEM:
- Ist: Neuer Termin setzt Uhrzeit nicht passend zum angeklickten Slot.
- Soll: Klick auf Slot setzt Startzeit = Slot Start, Endzeit default = +X Minuten.
- Kontext: Kalender Slot Klick Create Event.

SCOPE-FENCE:
- Erlaubt: Slot Click Handler und Create Event Defaults. Max 3 Dateien.
- Verboten: Kein Refactor des gesamten Kalenders.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Klick auf Slot setzt korrekte Uhrzeit.
- Drag Verhalten bleibt wie bisher.





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-007
TITEL: Lernblock am konkreten Tag kann kein Rechtsgebiet setzen
TYP: Bug/UX
PRIORITÃ„T: P1

PROBLEM:
- Ist: Beim Erstellen eines Lernblocks am konkreten Tag fehlt Auswahl Rechtsgebiet, daher gleiche Farben.
- Soll: Rechtsgebiet ist wÃ¤hlbar und Farbe basiert darauf.
- Kontext: Lernblock Create Modal / Day View.

SCOPE-FENCE:
- Erlaubt: Nur Lernblock Create UI + Model Binding. Max 3 Dateien.
- Verboten: Kein Umbau des Farbsystems.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Rechtsgebiet kann gesetzt werden.
- Farbcode unterscheidet korrekt.
- Bestehende LernblÃ¶cke bleiben korrekt.





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-008
TITEL: Globale Play/Pause Controls fÃ¼r Stoppuhr
TYP: UX
PRIORITÃ„T: P2

PROBLEM:
- Ist: Play/Pause nur in Timer Ansicht erreichbar.
- Soll: Oben im Header globale Controls (nur fÃ¼r Stoppuhr) sichtbar wenn aktiv.
- Kontext: Header/Navigation.

SCOPE-FENCE:
- Erlaubt: Header Komponente + Timer State Hook. Max 3 Dateien.
- Verboten: Kein Navigation Refactor.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Play/Pause im Header steuert Stoppuhr korrekt.
- Keine Layout Regression in anderen Screens.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-009
TITEL: Sekundenanzeige bei Stoppuhr anzeigen
TYP: UX
PRIORITÃ„T: P2

PROBLEM:
- Ist: Stoppuhr zeigt keine Sekunden, Bewegung ist schwer erkennbar.
- Soll: Anzeige inkl Sekunden (MM:SS oder HH:MM:SS) nur in Stoppuhr.
- Kontext: Stoppuhr Display.

SCOPE-FENCE:
- Erlaubt: Nur Stoppuhr Anzeige oder TimeFormat lokal. Max 2 Dateien.
- Verboten: Keine globale Time Format Ã„nderung.

CHANGE-BUDGET: Max 2 Dateien, max 60 Zeilen.

AKZEPTANZ:
- Stoppuhr zeigt Sekunden.
- Kalender und Tagesplaner Formate bleiben unverÃ¤ndert.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-010
TITEL: Wochenansicht Termine ohne Sekunden
TYP: UX
PRIORITÃ„T: P2

PROBLEM:
- Ist: Termine in Wochenansicht zeigen Sekunden.
- Soll: Nur HH:MM.
- Kontext: Wochenansicht Event Render.

SCOPE-FENCE:
- Erlaubt: Nur Wochenansicht Render und lokales Format. Max 2 Dateien.
- Verboten: Keine globale Format Ã„nderung.

CHANGE-BUDGET: Max 2 Dateien, max 60 Zeilen.

AKZEPTANZ:
- Wochenansicht ohne Sekunden.
- Andere Views unverÃ¤ndert.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-011
TITEL: Morgen Check in erledigt Feld nimmt zu viel Platz ein
TYP: UX
PRIORITÃ„T: P2

PROBLEM:
- Ist: Feld ist zu groÃŸ und verdrÃ¤ngt Inhalte.
- Soll: Kompakter, weniger HÃ¶he, ggf einklappbar.
- Kontext: Startseite.

SCOPE-FENCE:
- Erlaubt: Nur Startseiten Komponente und CSS. Max 2 Dateien.
- Verboten: Kein Redesign Startseite.

CHANGE-BUDGET: Max 2 Dateien, max 80 Zeilen.

AKZEPTANZ:
- Feld ist sichtbar aber kompakter.
- Keine Ãœberlappung oder Layout BrÃ¼che.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-012
TITEL: GroÃŸer Start Button startet Timer nicht
TYP: Bug
PRIORITÃ„T: P0

PROBLEM:
- Ist: Start Button oben startet Timer nicht, nur Ã¼ber Einstellungen Klick.
- Soll: Start Button lÃ¶st exakt dieselbe Start Aktion aus wie der funktionierende Weg.
- Kontext: Timer Start CTA.

SCOPE-FENCE:
- Erlaubt: Start Button Handler + Timer Action. Max 3 Dateien.
- Verboten: Kein Umbau der Timer Architektur.

CHANGE-BUDGET: Max 3 Dateien, max 80 Zeilen.

AKZEPTANZ:
- Start Button startet Timer sofort.
- Pause/Resume unverÃ¤ndert.






ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-013
TITEL: Tagesziel reset und Anzeige "Tagesziel erreicht" korrekt
TYP: Bug
PRIORITÃ„T: P0

PROBLEM:
- Ist: Tagesziel resettiert nicht, zeigt Zeit von gestern. Anzeige "Tagesziel erreicht -> 7:54" wirkt wie aktuelle Uhrzeit.
- Soll: Reset tÃ¤glich korrekt. Anzeige zeigt Zeitpunkt des Zielerreichens oder klar benannt.
- Kontext: Tagesziel Tracking.

SCOPE-FENCE:
- Erlaubt: Tagesziel State + Anzeige. Max 3 Dateien.
- Verboten: Kein neues Tracking System.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Reset erfolgt bei Tageswechsel.
- Zeitpunkt Zielerreichung ist korrekt und klar.
- Keine Datenverluste.





ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-014
TITEL: Slot Klick setzt Uhrzeit fÃ¤lschlich auf 09:00, Drag korrekt
TYP: Bug
PRIORITÃ„T: P0

PROBLEM:
- Ist: Klick auf Zeitfenster erzeugt Termin mit 09:00. Drag erzeugt korrekte Zeit.
- Soll: Klick Ã¼bernimmt Slot Startzeit, analog zu Drag Default.
- Kontext: Semesterbetrieb Ãœbungsklausur/Klausur auf Startseite.

SCOPE-FENCE:
- Erlaubt: Slot Click Handler und Event Creation Defaults. Max 3 Dateien.
- Verboten: Kein Refactor Kalender.

CHANGE-BUDGET: Max 3 Dateien, max 120 Zeilen.

AKZEPTANZ:
- Klick erzeugt Termin mit korrekter Startzeit.
- Drag bleibt unverÃ¤ndert.
- Keine Ã„nderung anderer Default Zeiten.







ROLE: Senior Engineer. Minimal Change.

TICKET-ID: PW-015
TITEL: Themenplan Erstellung Ã¼ber Screenshot
TYP: Feature
PRIORITÃ„T: P2

PROBLEM:
- Ist: Kein Weg, aus Screenshot einen Themenplan zu erzeugen.
- Soll: MVP: Upload Screenshot -> extrahiere Text -> erstelle Themenliste -> Nutzer kann bearbeiten -> speichern.
- Kontext: Themenplan.

SCOPE-FENCE:
- Erlaubt: Nur neuer kleiner Flow als MVP in bestehenden Feature Struktur. Max 5 Dateien.
- Verboten: Kein komplettes Redesign Themenplan, keine neue Architektur.

CHANGE-BUDGET: Max 5 Dateien, max 250 Zeilen.

VORGEHEN:
1) Vorschlag fÃ¼r kleinsten MVP.
2) Implementiere nur MVP.
3) Manuelle Tests.

AKZEPTANZ:
- Screenshot Upload mÃ¶glich.
- Ergebnis als editierbare Liste.
- Speichern funktioniert.




================================================================================
                        TICKET-ANALYSE (27.01.2026)
================================================================================

Die folgenden Tickets wurden analysiert und deren Status ermittelt:

STATUS-LEGENDE:
  âœ… GEFIXT     - Bug wurde bereits behoben
  ðŸ”´ OFFEN      - Bug existiert noch
  ðŸŸ¡ TEILWEISE  - Teilweise behoben, Rest offen


--------------------------------------------------------------------------------
PW-005: Timer lÃ¤uft bei Background/Screen Sync nicht zuverlÃ¤ssig weiter
--------------------------------------------------------------------------------
STATUS: âœ… GEFIXT (T16-W3)

ANALYSE:
- Timer verwendet timestamp-basierte Berechnung (nicht Interval-Counting)
- Visibility Change Handler implementiert (recalculates bei Tab-Wechsel)
- localStorage + Supabase Persistenz fÃ¼r Restart-Szenarios

BETROFFENE DATEIEN:
- src/contexts/timer-context.jsx (Zeilen 392-396, 413-422, 652-673)

KEINE AKTION ERFORDERLICH.


--------------------------------------------------------------------------------
PW-012: GroÃŸer Start Button startet Timer nicht
--------------------------------------------------------------------------------
STATUS: âœ… GEFIXT

ANALYSE:
- Start Button in ConfiguredIdleState (timer-main-dialog.jsx:910-940)
- Ruft startFromConfig() korrekt auf
- startFromConfig() liest frische Config aus localStorage (BUG-015 Fix)
- Setzt timerState = TIMER_STATES.RUNNING korrekt

BETROFFENE DATEIEN:
- src/components/dashboard/timer/timer-main-dialog.jsx
- src/contexts/timer-context.jsx

KEINE AKTION ERFORDERLICH.


--------------------------------------------------------------------------------
PW-001: Aufgaben vom Tag fehlen in AufgabenÃ¼bersicht
--------------------------------------------------------------------------------
STATUS: ðŸ”´ OFFEN

ROOT CAUSE:
- aufgaben-content.jsx:77 verwendet toISOString().split('T')[0]
- toISOString() konvertiert zu UTC â†’ verschiebt Datum um 1 Tag
- User in PST um 22:00 erstellt Task â†’ gespeichert fÃ¼r morgen

SCOPE-FENCE:
- Erlaubt: aufgaben-content.jsx Zeile 77 Ã¤ndern
- Erlaubt: Lokale formatDate() Helper oder Import aus use-dashboard.js
- Verboten: Globale Date-Utils refactoren
- Verboten: Andere Komponenten Ã¤ndern

CHANGE-BUDGET: 1 Datei, max 10 Zeilen

FIX:
```javascript
// Zeile 77 VORHER:
const [newTaskDate, setNewTaskDate] = useState(new Date().toISOString().split('T')[0]);

// Zeile 77 NACHHER:
const formatDate = (d) => `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
const [newTaskDate, setNewTaskDate] = useState(formatDate(new Date()));
```

AKZEPTANZ:
- Neue Aufgabe erscheint direkt ohne Reload
- Filter Datum Heute zeigt sie zuverlÃ¤ssig
- Keine Ã„nderung am Verhalten fÃ¼r andere Tage


--------------------------------------------------------------------------------
PW-002: Lernblock Aufgaben werden nicht in To Do/Verwaltung gelistet
--------------------------------------------------------------------------------
STATUS: ðŸ”´ OFFEN

ROOT CAUSE:
- Block-Tasks werden in block.tasks[] gespeichert (calendar_blocks)
- Dashboard/Verwaltung lesen nur aus tasksByDate (calendar_tasks)
- Zwei isolierte Task-Systeme ohne Synchronisation

DATENFLUSS:
```
Lernblock â†’ block.tasks[]  â†’  calendar_blocks (Supabase)
                              â†“ KEINE VERBINDUNG
Dashboard â† tasksByDate    â†  calendar_tasks (Supabase)
```

SCOPE-FENCE:
- Erlaubt: Dashboard/Verwaltung Tasks aus blocksByDate aggregieren (read-side fix)
- Erlaubt: use-dashboard.js und aufgaben-content.jsx erweitern
- Verboten: Block-Task-Erstellung Ã¤ndern
- Verboten: Neues Sync-System einfÃ¼hren
- Verboten: calendar_tasks Tabelle fÃ¼r Block-Tasks nutzen

CHANGE-BUDGET: 2 Dateien, max 50 Zeilen

ANSATZ:
Block-Tasks beim Abruf aggregieren:
```javascript
// use-dashboard.js oder aufgaben-content.jsx
const allTasks = useMemo(() => {
  const globalTasks = tasksByDate[dateString] || [];
  const blockTasks = (blocksByDate[dateString] || [])
    .flatMap(block => (block.tasks || []).map(t => ({
      ...t,
      fromBlock: true,
      blockId: block.id,
    })));
  return [...globalTasks, ...blockTasks];
}, [tasksByDate, blocksByDate, dateString]);
```

AKZEPTANZ:
- Lernblock Aufgabe erscheint sofort in To Do
- Lernblock Aufgabe erscheint unter Verwaltung
- Keine Duplikate, keine falschen FÃ¤lligkeiten


--------------------------------------------------------------------------------
PW-013: Tagesziel reset und Anzeige "Tagesziel erreicht" korrekt
--------------------------------------------------------------------------------
STATUS: ðŸŸ¡ TEILWEISE

ANALYSE:
- âœ… Reset funktioniert korrekt (via dateString Ã„nderung bei Mitternacht)
- ðŸ”´ Display "Tagesziel erreicht â†’ 7:54" zeigt AKTUELLE ZEIT, nicht Zielerreichungszeit

ROOT CAUSE:
- dashboard-sub-header.jsx:136 zeigt currentTime (updates jede Sekunde)
- User denkt es zeigt "wann Ziel erreicht wurde"

SCOPE-FENCE:
- Erlaubt: dashboard-sub-header.jsx Zeile 136 Ã¤ndern
- Erlaubt: timer-context.jsx secondaryText Berechnung anpassen
- Verboten: Reset-Logik Ã¤ndern (funktioniert bereits)
- Verboten: Neue State-Variablen fÃ¼r "Zielerreichungszeit"

CHANGE-BUDGET: 2 Dateien, max 20 Zeilen

FIX (Option A - Empfohlen):
```javascript
// dashboard-sub-header.jsx:136 VORHER:
return `Tagesziel erreicht â†’ ${currentTime}`;

// NACHHER (ohne verwirrende Zeit):
return `Tagesziel erreicht`;
```

AKZEPTANZ:
- Anzeige nicht mehr verwirrend
- Reset erfolgt bei Tageswechsel korrekt
- Keine Datenverluste


--------------------------------------------------------------------------------
PW-014: Slot Klick setzt Uhrzeit fÃ¤lschlich auf 09:00, Drag korrekt
--------------------------------------------------------------------------------
STATUS: ðŸ”´ OFFEN

ROOT CAUSE:
- Click-Handler: Math.floor(y / hourHeight) â†’ rundet auf ganze Stunde
- Drag-Handler: yToTime(y) â†’ 15-Minuten-Snapping

UNTERSCHIED:
| Aktion | Handler | PrÃ¤zision |
|--------|---------|-----------|
| CLICK  | Math.floor(hour) | Ganze Stunde (09:00) |
| DRAG   | yToTime() | 15-Minuten (09:15, 09:30) |

SCOPE-FENCE:
- Erlaubt: week-grid.jsx Click-Handler (Zeile 924-932) anpassen
- Erlaubt: yToTime() Funktion wiederverwenden
- Verboten: Drag-Handler Ã¤ndern
- Verboten: Dialog-Komponenten Ã¤ndern

CHANGE-BUDGET: 1 Datei, max 15 Zeilen

FIX:
```javascript
// week-grid.jsx Click-Handler VORHER:
const hour = Math.floor(y / hourHeight);
handleTimeBlockClick(date, `${hour.toString().padStart(2, '0')}:00`);

// NACHHER (mit 15-Min-Snapping wie Drag):
const hour = yToTime(y);
const hourInt = Math.floor(hour);
const minutes = Math.round((hour % 1) * 60);
handleTimeBlockClick(date, `${hourInt.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}`);
```

AKZEPTANZ:
- Klick auf Slot setzt korrekte Uhrzeit (15-Min-PrÃ¤zision)
- Drag Verhalten bleibt wie bisher
- Keine Ã„nderung anderer Default Zeiten


--------------------------------------------------------------------------------
PW-006: Neuer Termin Ã¼bernimmt Uhrzeit des angeklickten Zeitfensters
--------------------------------------------------------------------------------
STATUS: DUPLIKAT von PW-014

EMPFEHLUNG: PW-006 schlieÃŸen, PW-014 behalten.


================================================================================
                        ZUSAMMENFASSUNG
================================================================================

| Ticket | Status | Aufwand | PrioritÃ¤t |
|--------|--------|---------|-----------|
| PW-001 | ðŸ”´ OFFEN | 1 Datei, 10 Zeilen | P0 |
| PW-002 | ðŸ”´ OFFEN | 2 Dateien, 50 Zeilen | P0 |
| PW-005 | âœ… GEFIXT | - | - |
| PW-006 | DUPLIKAT | â†’ PW-014 | - |
| PW-012 | âœ… GEFIXT | - | - |
| PW-013 | ðŸŸ¡ TEILWEISE | 2 Dateien, 20 Zeilen | P0 |
| PW-014 | ðŸ”´ OFFEN | 1 Datei, 15 Zeilen | P0 |

EMPFOHLENE REIHENFOLGE:
1. PW-001 (Quick Fix, 10 Zeilen)
2. PW-014 (Quick Fix, 15 Zeilen)
3. PW-013 (Quick Fix, 20 Zeilen)
4. PW-002 (Architektur, 50 Zeilen)
